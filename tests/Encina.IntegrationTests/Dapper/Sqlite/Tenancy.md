# Integration Tests - Dapper.Sqlite Tenancy

## Status: Not Implemented

## Justification

Integration tests for Dapper.Sqlite Tenancy are not implemented for the following reasons:

### 1. In-Memory Database Nature

SQLite is primarily used as an in-memory or file-based database for testing purposes. The Tenancy implementation uses the same underlying Dapper queries as the standard Dapper.Sqlite provider, which is already covered by existing integration tests.

### 2. Adequate Coverage from Other Test Types

- **Unit Tests**: Full coverage of TenantAwareFunctionalRepository, TenantEntityMappingBuilder, and DapperTenancyOptions
- **Guard Tests**: Parameter validation for all public methods
- **Property Tests**: Invariant verification for options and mappings
- **Contract Tests**: API consistency verification across all Dapper providers

### 3. Multi-Tenancy Logic is Provider-Agnostic

The multi-tenancy filtering logic is generated by Dapper's SQL builder and is identical across all Dapper providers. Testing this with one real database validates the pattern for all providers.

### 4. Existing Integration Coverage

The Dapper.Sqlite integration tests already validate:

- `Dapper\Sqlite\Inbox\InboxStoreDapperTests.cs`
- `Dapper\Sqlite\Outbox\OutboxStoreDapperTests.cs`
- `Dapper\Sqlite\Sagas\SagaStoreDapperTests.cs`
- `Dapper\Sqlite\Scheduling\ScheduledMessageStoreDapperTests.cs`

### 5. Recommended Alternative

Extend existing Dapper.Sqlite integration tests with tenant-specific scenarios if explicit database-level multi-tenancy testing is required.

## Related Files

- `src/Encina.Dapper.Sqlite/Tenancy/TenantAwareFunctionalRepositoryDapper.cs`
- `src/Encina.Dapper.Sqlite/Tenancy/TenantEntityMappingBuilder.cs`
- `tests/Encina.UnitTests/Dapper/Sqlite/Tenancy/`

## Date: 2026-01-23

## Issue: #282
