-- SQL Server User Creation Script
-- Generated by Encina Module Isolation
-- IMPORTANT: Replace {{ModuleName_Password}} placeholders with actual passwords before execution
-- This script is idempotent and can be run multiple times safely

-- Create login and user for module: Test'Module
IF NOT EXISTS (SELECT 1 FROM sys.server_principals WHERE name = N'test'']user_login')
BEGIN
    CREATE LOGIN [test']]user_login] WITH PASSWORD = N'{{Test'Module_Password}}';
    PRINT 'Created login: test']user_login';
END
ELSE
BEGIN
    PRINT 'Login already exists: test']user_login';
END
GO

IF NOT EXISTS (SELECT 1 FROM sys.database_principals WHERE name = N'test'']user')
BEGIN
    CREATE USER [test']]user] FOR LOGIN [test']]user_login];
    PRINT 'Created user: test']user';
END
ELSE
BEGIN
    PRINT 'User already exists: test']user';
END
GO

PRINT 'User creation completed successfully.';
